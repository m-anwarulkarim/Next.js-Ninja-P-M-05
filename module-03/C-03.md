## ЁЯНк Cookies vs ЁЯЧДя╕П LocalStorage: Deep Dive

ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╕рзНржЯрзЛрж░рзЗржЬ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рж╛рж░ рж╕ржорзЯ ржорзВрж▓ ржпрзБржжрзНржзржЯрж╛ рж╣рзЯ **Security** ржмржирж╛ржо **Convenience** ржПрж░ ржоржзрзНржпрзЗред ржирж┐ржЪрзЗ ржПржХржЯрж┐ ржбрж╛рзЯрж╛ржЧрзНрж░рж╛ржорзЗрж░ ржорж╛ржзрзНржпржорзЗ ржПржжрзЗрж░ ржХрж╛ржЬрзЗрж░ ржкрж╛рж░рзНржержХрзНржп ржжрзЗржЦрж╛ржирзЛ рж╣рж▓рзЛ:

### рзз. Security Perspective: XSS vs CSRF (рж╕ржмржЪрзЗржпрж╝рзЗ ржЬрж░рзБрж░рж┐ ржЕржВрж╢)

ржЖржкржирж┐ ржпржЦржи ржХрзЛржирзЛ Sensitive Data (ржпрзЗржоржи: Auth Token) рж╕рзЗржн ржХрж░рзЗржи, рждржЦржи ржжрзБржЗ ржзрж░ржирзЗрж░ ржЕрзНржпрж╛ржЯрж╛ржХ ржирж┐рзЯрзЗ ржнрж╛ржмрждрзЗ рж╣рзЯ:

- **XSS (Cross-Site Scripting):** рж╣рзНржпрж╛ржХрж╛рж░ ржпржжрж┐ ржЖржкржирж╛рж░ рж╕рж╛ржЗржЯрзЗ ржХрзЛржирзЛ ржорзНржпрж╛рж▓рж┐рж╢рж┐ржпрж╝рж╛рж╕ ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ рж░рж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ, рждржмрзЗ рж╕рзЗ `localStorage` ржПрж░ рж╕ржм ржбрж╛ржЯрж╛ ржПржХ ржирж┐ржорзЗрж╖рзЗ ржЪрзБрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред
- **ржмрж┐ржЬржпрж╝рзА:** **Cookie** (ржпржжрж┐ `HttpOnly` ржлрзНрж▓рзНржпрж╛ржЧ ржЕржи ржерж╛ржХрзЗ, рждржмрзЗ JS рж╕рзЗржЯрж╛ рж░рж┐ржб ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛)ред

- **CSRF (Cross-Site Request Forgery):** ржХрзБржХрж┐ ржпрзЗрж╣рзЗрждрзБ ржкрзНрж░рждрж┐ржЯрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржЕржЯрзЛржорзЗржЯрж┐ржХ ржпрж╛рзЯ, рждрж╛ржЗ рж╣рзНржпрж╛ржХрж╛рж░ ржнрж┐ржХржЯрж┐ржорзЗрж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржЬрж╛ржирзНрждрзЗржЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред
- **ржмрж┐ржЬржпрж╝рзА:** **LocalStorage** (ржХрж╛рж░ржг ржПржЯрж┐ ржЕржЯрзЛржорзЗржЯрж┐ржХ ржпрж╛рзЯ ржирж╛, ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржжрж┐рзЯрзЗ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржкрж╛ржарж╛рждрзЗ рж╣рзЯ)ред

---

### рзи. JWT (Token) ржХрзЛржерж╛рзЯ рж░рж╛ржЦрж╛ рж╕рзЗрж░рж╛?

ржПржЯрж┐ ржирж┐рзЯрзЗ ржбрзЗржнрзЗрж▓ржкрж╛рж░ржжрзЗрж░ ржоржзрзНржпрзЗ ржЕржирзЗржХ ржмрж┐рждрж░рзНржХ ржЖржЫрзЗ, рждржмрзЗ ржмрж░рзНрждржорж╛ржи рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб рж╣рж▓рзЛ:

1. **рж╕ржмржЪрзЗрзЯрзЗ ржирж┐рж░рж╛ржкржж ржЙржкрж╛рзЯ:** **HttpOnly, Secure, ржПржмржВ SameSite=Strict Cookie** рждрзЗ Access Token рж░рж╛ржЦрж╛ред ржПрждрзЗ XSS ржерзЗржХрзЗ ржЯрзЛржХрзЗржи рж╕рзБрж░ржХрзНрж╖рж┐ржд ржерж╛ржХрзЗред
2. **ржЬржиржкрзНрж░рж┐рзЯ ржЙржкрж╛рзЯ:** LocalStorage-ржП рж░рж╛ржЦрж╛ред ржПржЯрж┐ ржбрзЗржнрзЗрж▓ржк ржХрж░рж╛ рж╕рж╣ржЬ, ржХрж┐ржирзНрждрзБ рж╕рж╛ржЗржЯрзЗ ржХрзЛржирзЛ ржерж╛рж░рзНржб-ржкрж╛рж░рзНржЯрж┐ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ (ржпрзЗржоржи ржХрзЛржирзЛ ржирж┐ржЪрзБ ржорж╛ржирзЗрж░ NPM package) ржерж╛ржХрж▓рзЗ ржЯрзЛржХрзЗржи ржЪрзБрж░рж┐ рж╣ржУрзЯрж╛рж░ рж░рж┐рж╕рзНржХ ржерж╛ржХрзЗред

> **Pro Tip:** ржмрж░рзНрждржорж╛ржирзЗ ржЕржирзЗржХ ржЖржзрзБржирж┐ржХ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ **"In-memory storage"** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржЕрж░рзНржерж╛рзО ржЯрзЛржХрзЗржиржЯрж┐ рж╢рзБржзрзБ ржПржХржЯрж┐ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓рзЗ рж░рж╛ржЦрж╛ рж╣рзЯред ржкрзЗржЬ рж░рж┐ржлрзНрж░рзЗрж╢ ржжрж┐рж▓рзЗ ржЯрзЛржХрзЗржи рж╣рж╛рж░рж┐рзЯрзЗ ржпрж╛рзЯ, рждржЦржи ржПржХржЯрж┐ **Refresh Token** (ржпрж╛ HttpOnly Cookie-рждрзЗ ржерж╛ржХрзЗ) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирждрзБржи Access Token ржЖржирж╛ рж╣рзЯред

---

### рзй. Cookie, LocalStorage ржПржмржВ SessionStorage ржПрж░ ржжрзНрж░рзБржд рждрзБрж▓ржирж╛

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп              | Cookie                       | LocalStorage   | SessionStorage      |
| ---------------------- | ---------------------------- | -------------- | ------------------- |
| **Capacity**           | рзк KB (ржЦрзБржмржЗ ржХржо)               | рзл - рззрзж MB      | рзл MB                |
| **Expiration**         | ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ рж╕рзЗржЯ ржХрж░рж╛ ржпрж╛рзЯ       | ржХржЦржиржУ рж╢рзЗрж╖ рж╣рзЯ ржирж╛ | ржЯрзНржпрж╛ржм ржмржирзНржз ржХрж░рж▓рзЗ рж╢рзЗрж╖ |
| **Accessible by**      | Client & Server              | Client only    | Client only         |
| **Automatic Transfer** | рж╣рзНржпрж╛ (ржкрзНрж░рждрж┐ HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ) | ржирж╛             | ржирж╛                  |

---

### рзк. Next.js ржПржмржВ ржЖржзрзБржирж┐ржХ ржУрзЯрзЗржм ржЕрзНржпрж╛ржкрзЗ ржХрзЛржиржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

Next.js ржмрж╛ SSR (Server Side Rendering) ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ **Cookie** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ ржпржжрж┐ ржЖржкржирж┐ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рж╛ржЗржб ржерзЗржХрзЗ ржбрж╛ржЯрж╛ ржлрзЗржЪ ржХрж░рждрзЗ ржЪрж╛ржиред

- **ржХрзЗржи?** ржХрж╛рж░ржг рж╕рж╛рж░рзНржнрж╛рж░ ржпржЦржи ржкрзЗржЬ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗ, рждржЦржи рж╕рзЗ `localStorage` ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ (ржпрзЗрж╣рзЗрждрзБ ржУржЯрж╛ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржерж╛ржХрзЗ)ред ржХрж┐ржирзНрждрзБ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржЕржЯрзЛржорзЗржЯрж┐ржХ **Cookie** ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯ, рждрж╛ржЗ рж╕рж╛рж░рзНржнрж╛рж░ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ ржЗржЙржЬрж╛рж░ рж▓ржЧржЗржи ржХрж░рж╛ ржХрж┐ ржирж╛ред
