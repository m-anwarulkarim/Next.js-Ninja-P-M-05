# token-based authenticatio

Token-based authentication (বিশেষ করে JWT বা JSON Web Token) আধুনিক ওয়েব এবং মোবাইল অ্যাপ্লিকেশনে সিকিউরিটির জন্য সবচেয়ে জনপ্রিয় মাধ্যম। এটি মূলত "Stateless" কাজ করে, অর্থাৎ সার্ভারকে মনে রাখতে হয় না যে আপনি লগ-ইন করা আছেন কি না।

নিচে সহজভাবে এর প্রতিটি ধাপ এবং এর পেছনের কনসেপ্টগুলো বিস্তারিত আলোচনা করা হলো:

---

## ১. মূল কনসেপ্ট: Token কী?

সহজ কথায়, **Token** হলো একটি ডিজিটাল চাবি বা পাসের মতো। আপনি যখন কোনো মেলায় বা কনসার্টে যান, টিকিট দেখালে তারা আপনাকে হাতে একটি 'সিল' বা 'ব্যান্ড' পরিয়ে দেয়। এরপর যতবার আপনি গেট দিয়ে ঢুকবেন, আপনাকে আর টিকিট দেখাতে হয় না, শুধু হাতের ব্যান্ডটি দেখালেই হয়। টোকেন ঠিক এই কাজটাই করে।

---

## ২. এটি কিভাবে কাজ করে? (Step-by-Step Flow)

### ধাপ ১: লগ-ইন রিকোয়েস্ট (Authentication)

ইউজার তার ইউজারনেম এবং পাসওয়ার্ড দিয়ে সার্ভারে রিকোয়েস্ট পাঠায়।

### ধাপ ২: ভেরিফিকেশন এবং টোকেন তৈরি

সার্ভার চেক করে দেখে যে ইউজারনেম ও পাসওয়ার্ড সঠিক কি না। যদি সঠিক হয়, তবে সার্ভার একটি বিশেষ স্ট্রিং (যাকে **Token** বলা হয়) তৈরি করে। এই টোকেনের ভেতর ইউজারের কিছু তথ্য (যেমন: User ID) এনকোড করা থাকে এবং এটি সার্ভারের একটি **Secret Key** দিয়ে সাইন (Sign) করা থাকে।

### ধাপ ৩: টোকেন পাঠানো

সার্ভার এই টোকেনটি ইউজারের ব্রাউজার বা মোবাইল অ্যাপে ফেরত পাঠায়।

### ধাপ ৪: টোকেন সংরক্ষণ

ইউজারের ব্রাউজার (Local Storage বা Cookies-এ) এই টোকেনটি সেভ করে রাখে।

### ধাপ ৫: পরবর্তী রিকোয়েস্ট (Authorization)

এরপর ইউজার যখনই কোনো সিকিউর ডাটা দেখতে চায় (যেমন: প্রোফাইল বা মেসেজ), তখন সে রিকোয়েস্টের সাথে এই টোকেনটি পাঠিয়ে দেয়। সাধারণত এটি **HTTP Header**-এ পাঠানো হয় এভাবে:

`Authorization: Bearer <your_token>`

### ধাপ ৬: সার্ভার ভেরিফিকেশন

সার্ভার যখন টোকেনটি পায়, সে শুধু চেক করে দেখে যে টোকেনটি তার নিজের Secret Key দিয়ে তৈরি করা কি না এবং টোকেনটির মেয়াদ (Expiry) আছে কি না। যদি সব ঠিক থাকে, সার্ভার ডাটা পাঠিয়ে দেয়।

---

## ৩. টোকেন আসলে কী দিয়ে তৈরি? (Structure of JWT)

সবচেয়ে জনপ্রিয় টোকেন ফরম্যাট হলো **JWT**। এর তিনটি অংশ থাকে:

1. **Header:** এখানে থাকে টোকেনটি কোন অ্যালগরিদমে তৈরি।
2. **Payload:** এখানে ইউজারের তথ্য থাকে (যেমন: নাম, আইডি)। মনে রাখবেন, এখানে সেনসিটিভ তথ্য (যেমন পাসওয়ার্ড) রাখা উচিত নয়।
3. **Signature:** এটি সবচেয়ে গুরুত্বপূর্ণ। হেডার, পেলোড এবং সার্ভারের একটি **Secret Key** মিশিয়ে এটি তৈরি হয়। কেউ যদি পেলোড বা তথ্য বদলে দেয়, তবে সিগনেচার আর মিলবে না, ফলে সার্ভার বুঝে ফেলবে টোকেনটি ভুয়া।

---

## ৪. কেন আমরা টোকেন ব্যবহার করি? (সুবিধাগুলো)

- **Stateless:** সার্ভারকে ডাটাবেসে বা সেশনে ইউজারের তথ্য সেভ করে রাখতে হয় না। এতে সার্ভারের ওপর চাপ কম পড়ে।
- **Scalability:** অনেকগুলো সার্ভার থাকলেও সমস্যা নেই, কারণ টোকেন ভেরিফাই করার জন্য শুধু Secret Key থাকলেই চলে।
- **Cross-Domain:** এটি বিভিন্ন ওয়েবসাইট বা ডোমেইন থেকে রিকোয়েস্ট পাঠাতে সুবিধা দেয় (CORS ইস্যু কম হয়)।
- **Mobile Friendly:** সেশন বা কুকিজের চেয়ে মোবাইল অ্যাপের জন্য টোকেন ব্যবহার করা অনেক সহজ।

---

## ৫. নিরাপত্তার জন্য কিছু জরুরি বিষয়

- **Token Expiry:** টোকেনের সবসময় একটি নির্দিষ্ট মেয়াদ থাকা উচিত (যেমন ১ ঘণ্টা)। মেয়াদ শেষ হলে ইউজারকে আবার লগ-ইন করতে হবে।
- **Refresh Token:** বারবার লগ-ইন করার ঝামেলা এড়াতে **Refresh Token** ব্যবহার করা হয়। এটি দিয়ে পুরনো টোকেন বদলে নতুন টোকেন নেওয়া যায়।
- **HTTPS:** টোকেন সবসময় HTTPS প্রোটোকলে পাঠাতে হয়, যাতে মাঝপথে কেউ এটি চুরি করতে না পারে।

---

**সহজ কথায় সারসংক্ষেপ:**
ইউজার পাসওয়ার্ড দেয় -> সার্ভার টোকেন দেয় -> ইউজার টোকেন জমিয়ে রাখে -> পরে সব রিকোয়েস্টের সাথে টোকেন পাঠায় -> সার্ভার সিগনেচার চেক করে পারমিশন দেয়।
