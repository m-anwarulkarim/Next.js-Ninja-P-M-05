## Intercepting Routes

### ১. Intercepting Routes আসলে কী?

ধরুন, আপনি একটি ফটো গ্যালারিতে আছেন (`/gallery`)। আপনি একটি ছবিতে ক্লিক করলেন। সাধারণ নিয়ম অনুযায়ী এটি আপনাকে `/photo/1` পেজে নিয়ে যাওয়ার কথা। কিন্তু আপনি চাচ্ছেন ইউজার গ্যালারি পেজেই থাকুক, আর ওই ছবিটা একটা **Modal** হিসেবে তার সামনে আসুক।

**এখানেই ম্যাজিক:**

- ইউজার যখন গ্যালারি থেকে ক্লিক করবে, তখন সে `/photo/1` এর কন্টেন্টটি একটি **Modal** হিসেবে দেখবে (Intercepted)।
- কিন্তু যদি সে পেজটি রিফ্রেশ দেয় বা সরাসরি ওই লিঙ্কটি কাউকে শেয়ার করে, তবে সে মডাল নয়, বরং পূর্ণাঙ্গ `/photo/1` পেজটি দেখবে।

---

### ২. কেন এটি ব্যবহার করবেন? (Use Cases)

- **Modals:** পেজ পরিবর্তন না করে ছবির ডিটেইলস, লগইন ফর্ম বা পোস্ট ভিউ দেখানো।
- **Context Preservation:** ইউজার যে লিস্ট বা ফিড স্ক্রোল করছিল, সেটা যেন হারিয়ে না যায়।
- **Sharable URLs:** মডাল ওপেন থাকা অবস্থায় ইউআরএল পরিবর্তন হয়, তাই ইউজার ওই নির্দিষ্ট মডালটি শেয়ার করতে পারে।

---

### ৩. কনভেনশন বা লেখার নিয়ম

Intercepting Routes তৈরি করতে ফোল্ডারের নামের আগে বিশেষ কিছু প্রিফিক্স ব্যবহার করতে হয় ( অনেকটা Relative Path এর মতো):

- `(.)` : **একই লেভেলের** রাউটকে ইন্টারসেপ্ট করতে।
- `(..)` : **এক লেভেল উপরের** রাউটকে ইন্টারসেপ্ট করতে।
- `(..)(..)` : **দুই লেভেল উপরের** রাউটকে ইন্টারসেপ্ট করতে।
- `(...)` : **Root (app directory)** লেভেলের রাউটকে ইন্টারসেপ্ট করতে।

---

### ৪. কিভাবে ব্যবহার করবেন? (ধাপে ধাপে উদাহরণ)

ধরা যাক, আমাদের একটি গ্যালারি আছে এবং আমরা একটি ছবির মডাল বানাতে চাই।

**ফোল্ডার স্ট্রাকচার:**

```text
app/
├── gallery/
│   ├── page.tsx          (গ্যালারি পেজ)
│   └── (.)photo/[id]/    (ইন্টারসেপ্টিং রাউট - মডাল হিসেবে কাজ করবে)
│       └── page.tsx
└── photo/[id]/           (অরিজিনাল রাউট - রিফ্রেশ দিলে এখানে যাবে)
    └── page.tsx

```

#### ধাপ ১: গ্যালারি পেজ (`gallery/page.tsx`)

এখানে সাধারণ একটি লিঙ্ক থাকবে।

```tsx
import Link from "next/link";

export default function GalleryPage() {
  return (
    <div>
      <h1>My Gallery</h1>
      <Link href="/photo/1">Open Photo 1</Link>
    </div>
  );
}
```

#### ধাপ ২: ইন্টারসেপ্টিং রাউট (`gallery/(.)photo/[id]/page.tsx`)

যখন ইউজার গ্যালারি থেকে ক্লিক করবে, নেক্সট জেএস এই ফাইলটি রেন্ডার করবে। এখানে আপনি আপনার **Modal UI** লিখবেন।

```tsx
export default function PhotoModal({ params }: { params: { id: string } }) {
  return (
    <div className="modal-overlay">
      <div className="modal-content">
        <h2>Photo {params.id} (This is a Modal)</h2>
        <p>ইউজার এখনো গ্যালারি পেজেই আছে!</p>
      </div>
    </div>
  );
}
```

#### ধাপ ৩: অরিজিনাল রাউট (`photo/[id]/page.tsx`)

যদি ইউজার পেজ রিফ্রেশ দেয়, তবে নেক্সট জেএস আর ইন্টারসেপ্ট করবে না, সে সরাসরি এই ফাইলে চলে আসবে।

```tsx
export default function PhotoPage({ params }: { params: { id: string } }) {
  return (
    <div>
      <h1>Full Photo View: {params.id}</h1>
      <p>এটি একটি ডেডিকেটেড পেজ, মডাল নয়।</p>
    </div>
  );
}
```

---

### ৫. Parallel Routes এর সাথে কম্বিনেশন

বাস্তব জীবনে Intercepting Routes কে সাধারণত **Parallel Routes** (`@modal`) এর সাথে মিলিয়ে ব্যবহার করা হয়। এতে করে ইন্টারসেপ্ট করা কন্টেন্টটি লেআউটের একটি নির্দিষ্ট স্লটে (Slot) সুন্দরভাবে বসে যায়।

### সারসংক্ষেপ:

| বিষয়                         | কাজ                                               |
| ---------------------------- | ------------------------------------------------- |
| **সফট নেভিগেশন (Click)**     | ইন্টারসেপ্ট করা পেজ রেন্ডার হয় (Modal)।           |
| **হার্ড নেভিগেশন (Refresh)** | অরিজিনাল পেজ রেন্ডার হয় (Full Page)।              |
| **ইউআরএল (URL)**             | দুই ক্ষেত্রেই ইউআরএল আপডেট হয় (যেমন: `/photo/1`)। |
