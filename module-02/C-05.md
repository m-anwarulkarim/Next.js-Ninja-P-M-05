# ЁЯЫая╕П Next.js-ржП "use client" ржПрж░ ржкрзВрж░рзНржгрж╛ржЩрзНржЧ ржЧрж╛ржЗржб

Next.js-ржПрж░ App Router ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ рж╕ржм ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ **Server Component** рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рзЗ ржирзЗрзЯред ржЖржкржирж┐ ржпржжрж┐ ржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржХрж░рждрзЗ ржЪрж╛ржи, рждржмрзЗржЗ ржХрзЗржмрж▓ `"use client"` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯред

### ЁЯФ╣ рзз. "use client" ржХрзА?

ржПржЯрж┐ ржХрзЛржирзЛ ржирждрзБржи ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕ ржирзЯ, ржмрж░ржВ ржПржЯрж┐ ржПржХржЯрж┐ **Directive** (ржирж┐рж░рзНржжрзЗрж╢ржирж╛) ржпрж╛ ржлрж╛ржЗрж▓рзЗрж░ ржПржХржжржо ржЙржкрж░рзЗ рж▓рж┐ржЦрждрзЗ рж╣рзЯред ржПржЯрж┐ Next.js-ржХрзЗ ржмрж▓рзЗ:

> _"ржПржЗ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржПржмржВ ржПрж░ ржнрзЗрждрж░рзЗрж░ рж╕ржм ржЪрж╛ржЗрж▓рзНржбржХрзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржЬржирзНржп (Client-side) ржмрж╛ржирж╛ржУред"_

---

### тЪЩя╕П рзи. ржХржЦржи ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи? (Use Cases)

ржЖржкржирж┐ ржпржЦржиржЗ ржирж┐ржЪрзЗрж░ ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрж░рждрзЗ ржЪрж╛ржЗржмрзЗржи, рждржЦржи ржЖржкржирж╛рж░ `"use client"` рж▓рж╛ржЧржмрзЗ:

1. **React Hooks ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ:** `useState`, `useEffect`, `useReducer`, `useContext` ржЗрждрзНржпрж╛ржжрж┐ред
2. **ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрж┐ржЯрж┐:** `onClick`, `onChange`, `onSubmit` ржПрж░ ржорждрзЛ ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ ржерж╛ржХрж▓рзЗред
3. **Browser API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ:** `window`, `localStorage`, `document`, ржмрж╛ `navigator` ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗред
4. **Custom Hooks:** ржпрзЗржЧрзБрж▓рзЛ ржЗржирзНржЯрж╛рж░ржирж╛рж▓рж┐ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯ рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

---

### ЁЯзк рзй. ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг (Example)

**тЭМ ржнрзБрж▓ ржкржжрзНржзрждрж┐ (Server Component-ржП Hook ржмрзНржпржмрж╣рж╛рж░):**

```tsx
// app/counter/page.tsx
export default function Counter() {
  const [count, setCount] = useState(0); // тЭМ Error! Server components cannot use hooks
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

**тЬЕ рж╕ржарж┐ржХ ржкржжрзНржзрждрж┐:**

```tsx
"use client"; // ржлрж╛ржЗрж▓рзЗрж░ ржПржХржжржо ржЙржкрж░рзЗ ржерж╛ржХрждрзЗ рж╣ржмрзЗ

import { useState } from "react";

export default function Counter() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>Count is: {count}</button>;
}
```

---

### ЁЯУж рзк. "use client" ржжрж┐рж▓рзЗ ржХрж┐ ржкрзБрж░рзЛ ржкрзЗржЬ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ?

ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐рж╖рзЯ ржоржирзЗ рж░рж╛ржЦржмрзЗржи:

- ржЖржкржирж┐ ржпржжрж┐ ржХрзЛржирзЛ ржлрж╛ржЗрж▓рзЗрж░ ржЙржкрж░рзЗ `"use client"` рж▓рж┐ржЦрзЗржи, рждржмрзЗ ржУржЗ ржлрж╛ржЗрж▓ ржПржмржВ рждрж╛рж░ ржнрзЗрждрж░рзЗ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рж╛ **рж╕ржм ржЪрж╛ржЗрж▓рзНржб ржХржорзНржкрзЛржирзЗржирзНржЯ** ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗред
- ржХрж┐ржирзНрждрзБ ржПрж░ ржорж╛ржирзЗ ржПржЗ ржирзЯ ржпрзЗ рж╕рзЗржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рзЗржирзНржбрж╛рж░ рж╣ржмрзЗ ржирж╛ред ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯржУ ржкрзНрж░ржержоржмрж╛рж░ рж╕рж╛рж░рзНржнрж╛рж░рзЗ **Pre-render** рж╣рзЯ (HTML рждрзИрж░рж┐ рж╣рзЯ), рждрж╛рж░ржкрж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржЧрж┐рзЯрзЗ Hydration рж╣рзЯред

---

### тЪЦя╕П рзл. Server vs Client Component (ржкрж╛рж░рзНржержХрзНржп)

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп          | Server Component (Default)          | Client Component ("use client")        |
| ------------------ | ----------------------------------- | -------------------------------------- |
| **Data Fetching**  | рж╕рж░рж╛рж╕рж░рж┐ `async/await` ржХрж░рж╛ ржпрж╛рзЯ        | `useEffect` ржмрж╛ SWR/Tanstack Query рж▓рж╛ржЧрзЗ |
| **Hooks**          | тЭМ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛               | тЬЕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ                     |
| **Backend Access** | тЬЕ рж╕рж░рж╛рж╕рж░рж┐ DB/File System ржПржХрзНрж╕рзЗрж╕ ржкрж╛рзЯ | тЭМ ржкрж╛рзЯ ржирж╛ (API ржХрж▓ рж▓рж╛ржЧрзЗ)                |
| **Bundle Size**    | рзж ржмрж╛ржЗржЯ (ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ JS ржпрж╛рзЯ ржирж╛)        | JS ржлрж╛ржЗрж▓ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржбрж╛ржЙржирж▓рзЛржб рж╣рзЯ           |
| **Interactivity**  | тЭМ ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛           | тЬЕ рж╕ржорзНржкрзВрж░рзНржг ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрзНржЯрж┐ржн            |

---

### ЁЯз▒ рзм. ржХржорзНржкрзЛржЬрж┐рж╢ржи ржкрзНржпрж╛ржЯрж╛рж░рзНржи (Best Practice)

Next.js-ржП рж╕рзЗрж░рж╛ ржирж┐рзЯржо рж╣рж▓рзЛ: **"Push Client Components to the Leaves"**ред ржЕрж░рзНржерж╛рзО, ржЖржкржирж╛рж░ ржкрзЗржЬржЯрж┐ржХрзЗ ржпрждржЯрж╛ рж╕ржорзНржнржм рж╕рж╛рж░рзНржнрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рж╛ржЦрзБржи, рж╢рзБржзрзБ ржпрзЗржЯрзБржХрзБ ржЬрж╛рзЯржЧрж╛рзЯ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржи ржжрж░ржХрж╛рж░ рж╕рзЗржЯрзБржХрзБржХрзЗ ржЖрж▓рж╛ржжрж╛ ржлрж╛ржЗрж▓ ржХрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ ржмрж╛ржирж╛ржиред

**ржЙржжрж╛рж╣рж░ржг:**
ржЖржкржирж╛рж░ ржкрзБрж░рзЛ ржкрзЗржЬржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╣рзЛржХ, ржХрж┐ржирзНрждрзБ рж╢рзБржзрзБ ржУржкрж░рзЗрж░ **Navbar** ржмрж╛ ржирж┐ржЪрзЗрж░ **Contact Form** ржЯрж┐ржХрзЗ `"use client"` ржХрж░рзЗ ржЖрж▓рж╛ржжрж╛ ржлрж╛ржЗрж▓рзЗ рж░рж╛ржЦрзБржиред

```tsx
// app/page.tsx (Server Component)
import Navbar from "./Navbar"; // This is "use client"
import ComplexData from "./ComplexData"; // This is Server Component

export default function Home() {
  return (
    <main>
      <Navbar /> {/* Client Component */}
      <ComplexData /> {/* Server Component */}
    </main>
  );
}
```

---

### ЁЯЪл рзн. ржХржоржи ржнрзБрж▓ (Common Mistakes)

1. **рж╕ржм ржлрж╛ржЗрж▓рзЗ "use client" ржжрзЗржУрзЯрж╛:** ржПржЯрж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкржХрзЗ ржнрж╛рж░рзА ржХрж░рзЗ рждрзБрж▓ржмрзЗ (Bundle size ржмрж╛рзЬржмрзЗ)ред
2. **Server Component-ржХрзЗ Client-ржПрж░ ржнрзЗрждрж░рзЗ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рж╛:** ржпржжрж┐ ржЖржкржирж┐ ржХрзЛржирзЛ рж╕рж╛рж░рзНржнрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрзЗрждрж░рзЗ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рзЗржи, рждржмрзЗ рж╕рзЗржЗ рж╕рж╛рж░рзНржнрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ржУ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред (ржПржЯрж┐ ржПрзЬрж╛рждрзЗ `children` ржкрзНрж░ржкрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ)ред

---

### ЁЯФС ржПржХ рж▓рж╛ржЗржирзЗ рж╕рж╛рж░рж╛ржВрж╢

`"use client"` рж╣рж▓рзЛ ржПржХржЯрж┐ рж╕рзАржорж╛ржирж╛ (Boundary) ржпрж╛ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рж╛ржЗржб ржПржмржВ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛ржЗржбржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗред ржПржЯрж┐ рж╢рзБржзрзБ рждржЦржиржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржпржЦржи ржЖржкржирж╛рж░ **React Hooks** ржмрж╛ **Browser API** ржжрж░ржХрж╛рж░ред
