## тП│ Next.js App Router: loading.js ржПрж░ ржкрзВрж░рзНржгрж╛ржЩрзНржЧ ржЧрж╛ржЗржб

Next.js-ржП ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕ржкрзЗрж░рж┐рзЯрзЗржирзНрж╕ (UX) ржЙржирзНржиржд ржХрж░рж╛рж░ ржЬржирзНржп `loading.js` ржПржХржЯрж┐ ржЕрждрзНржпржирзНржд рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржлрж╛ржЗрж▓ред ржПржЯрж┐ ржорзВрж▓ржд **React Suspense**-ржПрж░ ржУржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржХрж╛ржЬ ржХрж░рзЗред

### ЁЯФ╣ рзз. loading.js ржХрзА?

ржПржЯрж┐ рж╣ржЪрзНржЫрзЗ ржПржХржЯрж┐ **Route-level loading UI**ред ржпржЦржи ржХрзЛржирзЛ рж░рж╛ржЙржЯ (Route), рж▓рзЗржЖржЙржЯ (Layout), ржЕржержмрж╛ ржкрзЗржЬ (Page) ржХрзЛржирзЛ ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржХрж╛ржЬ (ржпрзЗржоржи: ржбрж╛ржЯрж╛ ржлрзЗржЪрж┐ржВ, ржХрзЛржб рж╕рзНржкрзНрж▓рж┐ржЯрж┐ржВ) ржХрж░рзЗ, рждржЦржи Next.js ржЕржЯрзЛржорзЗржЯрж┐ржХ ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗред

**ЁЯУБ ржлрзЛрж▓рзНржбрж╛рж░ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░:**

```text
app/
 тФФтФА dashboard/
     тФЬтФА page.tsx     (ржЖржкржирж╛рж░ ржорзЗржЗржи ржХржирзНржЯрзЗржирзНржЯ)
     тФФтФА loading.tsx  (ржЕржЯрзЛржорзЗржЯрж┐ржХ рж▓рзЛржбрж┐ржВ рж╕рзНржЯрзЗржЯ)

```

---

### тЪЩя╕П рзи. ржХржЦржи loading.js ржЯрзНрж░рж┐ржЧрж╛рж░ рж╣ржпрж╝?

Next.js ржпржЦржиржЗ ржжрзЗржЦрзЗ ржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ рж╣рждрзЗ рж╕ржорзЯ ржирж┐ржЪрзНржЫрзЗ, рждржЦржиржЗ рж╕рзЗ `loading.js` ржЪрж╛рж▓рзБ ржХрж░рзЗ ржжрзЗрзЯред ржкрзНрж░ржзрж╛ржиржд рзйржЯрж┐ ржХрж╛рж░ржгрзЗ ржПржЯрж┐ рж╣рзЯ:

1. **Server Component ржП `await` ржерж╛ржХрж▓рзЗ:** ржпржжрж┐ ржЖржкржирж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржбрж╛ржЯрж╛ ржлрзЗржЪ ржХрж░рж╛рж░ ржЬржирзНржп `await` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржиред
2. **Slow fetch():** ржпржжрж┐ ржЖржкржирж╛рж░ API ржерзЗржХрзЗ ржбрж╛ржЯрж╛ ржЖрж╕рждрзЗ рж╕ржорзЯ рж▓рж╛ржЧрзЗред
3. **Code Splitting:** ржмрзЬ ржХрзЛржирзЛ ржлрж╛ржЗрж▓ ржмрж╛ ржбрж╛ржЗржирж╛ржорж┐ржХ ржЗржорзНржкрзЛрж░рзНржЯ рж▓рзЛржб рж╣ржУрзЯрж╛рж░ рж╕ржорзЯред

---

### ЁЯзк рзй. ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг (Example)

**`page.tsx` (рж╕рж╛рж░рзНржнрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ)**

```tsx
export default async function Page() {
  // ржПржХржЯрж┐ fake рзй рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржбрж┐рж▓рзЗ (Delay) рждрзИрж░рж┐ ржХрж░рж╛ рж╣рж▓рзЛ
  await new Promise((r) => setTimeout(r, 3000));

  return (
    <div className="p-6">
      <h1>Dashboard Content Loaded!</h1>
      <p>ржПржЯрж┐ рзй рж╕рзЗржХрзЗржирзНржб ржкрж░ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗред</p>
    </div>
  );
}
```

**`loading.tsx` (рж▓рзЛржбрж┐ржВ ржХржорзНржкрзЛржирзЗржирзНржЯ)**

```tsx
export default function Loading() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-blue-500"></div>
      <p className="ml-4 text-lg font-medium">Loading data, please wait...</p>
    </div>
  );
}
```

ЁЯСЙ **ржХрзА ржШржЯржмрзЗ?** ржЗржЙржЬрж╛рж░ ржпржЦржи ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржбрзЗ ржпрж╛ржмрзЗ, рж╕рзЗ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ рж▓рзЛржбрж┐ржВ ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржиржЯрж┐ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗред рзй рж╕рзЗржХрзЗржирзНржб ржкрж░ ржпржЦржи ржбрж╛ржЯрж╛ рж░рзЗржбрж┐ рж╣ржмрзЗ, рждржЦржи ржЕржЯрзЛржорзЗржЯрж┐ржХ рж▓рзЛржбрж┐ржВ UI ржЪрж▓рзЗ ржЧрж┐рзЯрзЗ ржЖрж╕рж▓ ржкрзЗржЬ ржЪрж▓рзЗ ржЖрж╕ржмрзЗред

---

### ЁЯза рзк. ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирж┐рзЯржо (Rules)

- тЬФя╕П ржПржЯрж┐ **Client Component** ржирж╛ рж╣рж▓рзЗржУ ржЪрж▓рзЗ (рж╕рж╛рж░рзНржнрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗржУ ржХрж╛ржЬ ржХрж░рзЗ)ред
- тЬФя╕П ржПржЯрж┐ ржХрзЛржирзЛ **props** ржирзЗрзЯ ржирж╛ред
- тЬФя╕П ржПржЯрж┐ ржПржХржЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржерж╛ржХрж╛ `layout.js` ржПржмржВ рждрж╛рж░ ржнрзЗрждрж░рзЗрж░ рж╕ржм `page.js`-ржПрж░ ржЬржирзНржп рж╢рзЗрзЯрж╛рж░ржб (Shared) рж▓рзЛржбрж┐ржВ рж╕рзНржЯрзЗржЯ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред
- тЭМ ржПрж░ ржнрзЗрждрж░рзЗ `useEffect` ржмрж╛ `useState` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржкрзНрж░рзЯрзЛржЬржи ржирзЗржЗ, ржХрж╛рж░ржг ржПржЯрж┐ рж╢рзБржзрзБ ржПржХржЯрж┐ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржмрж╛ ржЕрзНржпрж╛ржирж┐ржорзЗржЯрзЗржб UI ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржпред

---

### ЁЯУж рзл. ржирзЗрж╕рзНржЯрзЗржб рж░рж╛ржЙржЯ ржмрж┐рж╣рзЗржнрж┐рзЯрж╛рж░ (Nested Behavior)

`loading.js` рж╣рж╛рзЯрж╛рж░рж╛рж░рзНржХрж┐ ржЕржирзБржпрж╛рзЯрзА ржХрж╛ржЬ ржХрж░рзЗ:

- **Root Loading:** `app/loading.js` ржкрзБрж░рзЛ ржЕрзНржпрж╛ржкрзЗрж░ ржпрзЗржХрзЛржирзЛ ржкрзЗржЬ рж▓рзЛржб рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржХрж╛ржЬ ржХрж░ржмрзЗред
- **Specific Loading:** `app/dashboard/loading.js` рж╢рзБржзрзБ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржПржмржВ рждрж╛рж░ ржнрзЗрждрж░рзЗрж░ рж╕ржм ржЪрж╛ржЗрж▓рзНржб рж░рж╛ржЙржЯрзЗрж░ ржЬржирзНржп ржХрж╛ржЬ ржХрж░ржмрзЗред
- ЁЯСЙ **ржУржнрж╛рж░рж░рж╛ржЗржб:** ржпржжрж┐ `dashboard/settings/` ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржирж┐ржЬрж╕рзНржм `loading.js` ржерж╛ржХрзЗ, рждржмрзЗ рж╕рзЗ рждрж╛рж░ ржкрзНржпрж╛рж░рзЗржирзНржЯ (Dashboard)-ржПрж░ рж▓рзЛржбрж┐ржВ UI ржЖрж░ ржжрзЗржЦрж╛ржмрзЗ ржирж╛ред

---

### ЁЯЪл рзм. ржХржоржи ржнрзБрж▓ (Common Mistakes)

1. **ржбрж╛ржЯрж╛ ржлрзЗржЪ ржХрж░рж╛:** ржнрзБрж▓ ржХрж░рзЗржУ `loading.js`-ржПрж░ ржнрзЗрждрж░рзЗ ржХрзЛржирзЛ ржбрж╛ржЯрж╛ ржлрзЗржЪ ржХрж░рж╛рж░ ржХрзЛржб рж▓рж┐ржЦржмрзЗржи ржирж╛ред ржПржЯрж┐ рж╢рзБржзрзБ ржПржХржЯрж┐ ржкрзНрж░рзЗржЬрзЗржирзНржЯрзЗрж╢ржи рж▓рзЗрзЯрж╛рж░ред
2. **ржнрж╛рж░рзА рж▓ржЬрж┐ржХ:** ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ ржпрждржЯрж╛ рж╕ржорзНржнржм рж╣рж╛рж▓ржХрж╛ рж░рж╛ржЦрзБржи ржпрж╛рждрзЗ ржПржЯрж┐ рждрж╛рзОржХрзНрж╖ржгрж┐ржХржнрж╛ржмрзЗ (Instantly) рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯред
3. **ржЧрзНрж▓рзЛржмрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржнрзЯ:** ржЕржирзЗржХрзЗ ржоржирзЗ ржХрж░рзЗржи ржЧрзНрж▓рзЛржмрж╛рж▓ `loading.js` ржжрж┐рж▓рзЗ рж╕ржм ржкрзЗржЬрзЗ ржПржХржЗ ржЬрж┐ржирж┐рж╕ ржжрзЗржЦрж╛ржмрзЗред ржПржЯрж┐ ржарж┐ржХ, рждржмрзЗ ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржлрзЛрж▓рзНржбрж╛рж░ ржнрж┐рждрзНрждрж┐ржХ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ `loading.js` ржжрж┐рзЯрзЗ рж╕рзЗржЯрж╛ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

---

### ЁЯФС ржПржХ рж▓рж╛ржЗржирзЗ рж╕рж╛рж░рж╛ржВрж╢

`loading.js` рж╣рж▓рзЛ ржПржХржЯрж┐ **Waiting State**, ржпрж╛ React Suspense ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржЯрзЛржорзЗржЯрж┐ржХ ржЖржкржирж╛рж░ ржкрзЗржЬрзЗрж░ ржХржирзНржЯрзЗржирзНржЯ ржЖрж╕рж╛рж░ ржЖржЧ ржкрж░рзНржпржирзНржд ржПржХржЯрж┐ рж╕рзБржирзНржжрж░ UI ржзрж░рзЗ рж░рж╛ржЦрзЗред
