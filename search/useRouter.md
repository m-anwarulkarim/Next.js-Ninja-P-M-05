## ЁЯФ╖ Next.js `useRouter()` тАУ рж╕ржорзНржкрзВрж░рзНржг ржЧрж╛ржЗржб (A to Z)

Next.js-ржП ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ-рж╕рж╛ржЗржб ржирзЗржнрж┐ржЧрзЗрж╢ржи ржПржмржВ ржЗржЙржЖрж░ржПрж▓ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛рж░ ржЬржирзНржп рж╕ржмржерзЗржХрзЗ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржЯрзБрж▓ рж╣рж▓рзЛ `useRouter` рж╣рзБржХред рждржмрзЗ ржирзЗржХрзНрж╕ржЯ ржЬрзЗржПрж╕-ржПрж░ ржнрж╛рж░рзНрж╕ржи ржЕржирзБржпрж╛рзЯрзА ржПрж░ ржмрзНржпржмрж╣рж╛рж░рзЗ ржмрзЬ ржкрж╛рж░рзНржержХрзНржп ржЖржЫрзЗред

### ЁЯФ┤ рзз. рж╕ржарж┐ржХ ржЗржоржкрзЛрж░рзНржЯ ржЪрж┐ржирзБржи (рж╕ржмржерзЗржХрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)

ржнрзБрж▓ ржЗржоржкрзЛрж░рзНржЯ ржХрж░рж▓рзЗ ржЖржкржирж╛рж░ ржХрзЛржб ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛ред

| ржлрж┐ржЪрж╛рж░                | App Router (Next 13+)                | Pages Router (Old)                |
| -------------------- | ------------------------------------ | --------------------------------- |
| **Import Path**      | `next/navigation`                    | `next/router`                     |
| **Folder Structure** | `app/` ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп                | `pages/` ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп           |
| **ржмрзНржпржмрж╣рж╛рж░**          | ржмрж░рзНрждржорж╛ржи рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржПржмржВ рж░рж┐ржХржорзЗржирзНржбрзЗржб | рж▓рж┐ржЧрзНржпрж╛рж╕рж┐ ржмрж╛ ржкрзБрж░ржирзЛ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп |

---

### ЁЯЯв рзи. App Router-ржП `useRouter()` ржПрж░ ржмрзНржпржмрж╣рж╛рж░ (Modern Next.js)

App Router-ржП `useRouter` рж╢рзБржзрзБржорж╛рждрзНрж░ ржирзЗржнрж┐ржЧрзЗрж╢ржирзЗрж░ ржХрж╛ржЬ ржХрж░рзЗред ржбрзЗржЯрж╛ ржмрж╛ ржкрзНржпрж╛рж░рж╛ржорж╕ ржкрж╛ржУрзЯрж╛рж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯред

```javascript
import { useRouter } from "next/navigation";

const MyComponent = () => {
  const router = useRouter();
  // ... ржмрж╛ржХрж┐ рж▓ржЬрж┐ржХ
};
```

#### ЁЯЪА ржирзЗржнрж┐ржЧрзЗрж╢ржи ржлрж╛ржВрж╢ржирж╕ржорзВрж╣:

1. **`router.push(href: string)`**: ржирждрзБржи ржПржХржЯрж┐ ржЗржЙржЖрж░ржПрж▓-ржП ржирж┐рзЯрзЗ ржпрж╛рзЯ ржПржмржВ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ рж╣рж┐рж╕рзНржЯрзЛрж░рж┐рждрзЗ рж╕рзЗржЯрж┐ ржпрзЛржЧ ржХрж░рзЗред (Back button ржХрж╛ржЬ ржХрж░ржмрзЗ)ред

2. **`router.replace(href: string)`**: ржмрж░рзНрждржорж╛ржи ржЗржЙржЖрж░ржПрж▓-ржХрзЗ ржирждрзБржи ржЗржЙржЖрж░ржПрж▓ ржжрж┐рзЯрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ ржжрзЗрзЯред ржПржЯрж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╣рж┐рж╕рзНржЯрзЛрж░рж┐рждрзЗ ржирждрзБржи ржПржирзНржЯрзНрж░рж┐
   рждрзИрж░рж┐ ржХрж░рзЗ ржирж╛ред (Login/Logout ржПрж░ ржЬржирзНржп рж╕рзЗрж░рж╛)ред

3. **`router.back()`**: ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ рж╣рж┐рж╕рзНржЯрзЛрж░рж┐ ржЕржирзБржпрж╛рзЯрзА ржПржХ ржзрж╛ржк ржкрж┐ржЫржирзЗ ржирж┐рзЯрзЗ ржпрж╛рзЯред

4. **`router.forward()`**: рж╣рж┐рж╕рзНржЯрзЛрж░рж┐ ржЕржирзБржпрж╛рзЯрзА ржПржХ ржзрж╛ржк рж╕рж╛ржоржирзЗ ржирж┐рзЯрзЗ ржпрж╛рзЯред

5. **`router.refresh()`**: ржмрж░рзНрждржорж╛ржи рж░рзБржЯржЯрж┐ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рзЗред ржПржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржЖржмрж╛рж░ ржлрзЗржЪ ржХрж░рзЗ (Server Components re-fetch), ржХрж┐ржирзНрждрзБ
   ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛ржЗржб рж╕рзНржЯрзЗржЯ (ржпрзЗржоржи: input value) рж╣рж╛рж░рж╛рзЯ ржирж╛ред

6. **`router.prefetch(href: string)`**: ржЗржЙржЬрж╛рж░ ржХрзНрж▓рж┐ржХ ржХрж░рж╛рж░ ржЖржЧрзЗржЗ ржУржЗ ржкрзЗржЬрзЗрж░ ржбрзЗржЯрж╛ ржкрзНрж░рж┐-рж▓рзЛржб ржХрж░рзЗ рж░рж╛ржЦрзЗ, ржпрж╛ ржирзЗржнрж┐ржЧрзЗрж╢ржиржХрзЗ рж╕рзБржкрж╛рж░ ржлрж╛рж╕рзНржЯ ржХрж░рзЗред

---

### ЁЯзй рзй. App Router-ржП Query ржПржмржВ Params ржкрзЬрж╛

App Router-ржП `useRouter()` ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржкрзНржпрж╛рж░рж╛ржорж╕ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржирж╛ред ржПрж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ рж╣рзБржХржЧрзБрж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ:

- **`usePathname()`**: ржмрж░рзНрждржорж╛ржи URL ржкрж╛рже ржЬрж╛ржирж╛рж░ ржЬржирзНржп (ржпрзЗржоржи: `/dashboard`)ред

- **`useSearchParams()`**: URL ржПрж░ ржХрзБрзЯрзЗрж░рж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржкрзЬрж╛рж░ ржЬржирзНржп (ржпрзЗржоржи: `?search=phone`)ред

- **`useParams()`**: ржбрж╛ржЗржирж╛ржорж┐ржХ рж░рзБржЯ ржкрзНржпрж╛рж░рж╛ржорж╕ ржкрж╛ржУрзЯрж╛рж░ ржЬржирзНржп (ржпрзЗржоржи: `[id]`)ред

---

### ЁЯФ╡ рзк. Pages Router-ржП `useRouter()` (Old Approach)

ржЖржкржирж┐ ржпржжрж┐ ржкрзБрж░ржирзЛ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржХрж╛ржЬ ржХрж░рзЗржи, рждржмрзЗ ржПржЦрж╛ржирзЗ `useRouter` ржЕржирзЗржХ ржмрзЗрж╢рж┐ рждржерзНржп ржжрзЗрзЯ:

```javascript
import { useRouter } from "next/router";

const router = useRouter();
console.log(router.query); // { id: '123' }
console.log(router.pathname); // '/blog/[id]'
console.log(router.asPath); // '/blog/123?q=nextjs'
```

---

### ЁЯЫа рзл. ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб ржЗржЙржЬ ржХрзЗрж╕ ржПржмржВ ржкрзНржпрж╛ржЯрж╛рж░рзНржирж╕

#### A. Auth Guard (ржкрзНрж░ржЯрзЗржХрзНржЯрзЗржб рж░рзБржЯ)

ржЗржЙржЬрж╛рж░ рж▓ржЧржЗржи ржирж╛ ржерж╛ржХрж▓рзЗ рждрж╛ржХрзЗ рж▓ржЧржЗржи ржкрзЗржЬрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗржУрзЯрж╛:

```javascript
useEffect(() => {
  if (!isLoggedIn) {
    router.replace("/login");
  }
}, [isLoggedIn]);
```

#### B. Conditional Navigation (рж╢рж░рзНржд рж╕рж╛ржкрзЗржХрзНрж╖рзЗ ржпрж╛ржУрзЯрж╛)

```javascript
const handlePurchase = () => {
  if (cart.length > 0) {
    router.push("/checkout");
  } else {
    alert("ржЖржкржирж╛рж░ ржХрж╛рж░рзНржЯ ржЦрж╛рж▓рж┐!");
  }
};
```

#### C. Delayed Redirect (ржжрзЗрж░рж┐рждрзЗ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ)

рж╕рж╛ржХрж╕рзЗрж╕ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржирзЛрж░ ржкрж░ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рж╛:

```javascript
setTimeout(() => {
  router.push("/dashboard");
}, 3000); // рзй рж╕рзЗржХрзЗржирзНржб ржкрж░
```

#### D. Dynamic Routing Logic

ржЖржЗржбрж┐рж░ ржУржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржбрж╛ржЗржирж╛ржорж┐ржХ ржирзЗржнрж┐ржЧрзЗрж╢ржи:

```javascript
router.push(`/user/profile/${user.id}`);
```

---

### тЪая╕П рж╕рж╛ржзрж╛рж░ржг ржнрзБрж▓ ржПржмржВ рж╕ржорж╛ржзрж╛ржи

- **Error: "NextRouter was not mounted"**: ржЖржкржирж┐ App Router-ржП ржнрзБрж▓ ржХрж░рзЗ `next/router` ржерзЗржХрзЗ ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзЗржЫрзЗржиред рж╕ржмрж╕ржорзЯ `next/navigation` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
- **Link vs Router**: ржпржжрж┐ рж╕рж╛ржзрж╛рж░ржг ржирзЗржнрж┐ржЧрзЗрж╢ржи рж╣рзЯ, рждржмрзЗ рж╕ржмрж╕ржорзЯ `<Link>` ржХржорзНржкрзЛржирзЗржирзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи (SEO-friendly)ред рж╢рзБржзрзБржорж╛рждрзНрж░ рж▓ржЬрж┐ржХ ржмрж╛ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ `router.push()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
